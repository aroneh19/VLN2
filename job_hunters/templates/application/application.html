{% extends 'base.html' %}
{% load static %}
{% block title %}Application{% endblock %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/application.css' %}">

<div class="container">
    <form action="{% url 'submit_application' %}?job_jid={{ job_id }}" method="post">
        {% csrf_token %}
        <div class="main-content">
            <div class="contact-container">
                <input type="hidden" name="job" value="{{ job }}">
                <input type="hidden" name="user" value="{{ user_profile.user_id }}">
                <h2>Contact Information</h2>
                <div class="contact-info">
                    <p><span class="label">Name:</span> {{ user_profile.user.first_name }} {{ user_profile.user.last_name }}</p>
                    <p><span class="label">Street Name:</span> {{ user_profile.street_name }}</p>
                    <p><span class="label">House number:</span> {{ user_profile.house_number }}</p>
                    <p><span class="label">City:</span> {{ user_profile.location.city }}</p>
                    <p><span class="label">Postal Code:</span> {{ user_profile.location.postcode }}</p>
                    <p><span class="label">Country:</span> {{ user_profile.country.country }}</p>
                </div>

                <h3 for="cover_letter">Cover Letter:</h3>
                <div class="cover-letter">
                    <textarea name="cover_letter" id="" cols="30" rows="10" required></textarea>
                </div>
                <div class="btn">
                    <button type="submit">Submit Application</button>
                </div>
            </div>
            
            <div class="extra-container">
                <div class="recommendation-container">
                    <h2>Recommendations</h2>
                    {% for recommendation in recommendations %}
                    <div class="recommendations">
                        <p><span class="label">Name:</span> {{ recommendation.name }}</p>
                        <p><span class="label">Email address:</span> {{ recommendation.email }}</p>
                        <p><span class="label">Phone Number:</span> {{ recommendation.phone_number }}</p>
                        <p><span class="label">May be contacted:</span> {% if recommendation.may_be_contacted %}Yes{% else %}No{% endif %}</p>
                    </div>
                    {% endfor %}
                </div>
                <div class="experience-container">
                    <h2>Experiences</h2>
                    {% for experience in experiences %}
                    <div class="experiences">
                        <p><span class="label">Place of Work:</span> {{ experience.place_of_work }}</p>
                        <p><span class="label">Role:</span> {{ experience.role }}</p>
                        <p><span class="label">Start Date:</span> {{ experience.start_date|date:'Y-m-d' }}</p>
                        <p><span class="label">End Date:</span> {{ experience.end_date|date:'Y-m-d' }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </form>
</div>

{% endblock %}
